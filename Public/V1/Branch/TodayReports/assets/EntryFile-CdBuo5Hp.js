(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const n of l.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&o(n)}).observe(document,{childList:!0,subtree:!0});function a(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(r){if(r.ep)return;r.ep=!0;const l=a(r);fetch(r.href,l)}})();const d="/Common/bin/PrimaryTables/WithData",i={PostUrl:d};let u=async()=>{let e=i.PostUrl;return await await(await fetch(e)).json()},m=({inData:e})=>{localStorage.setItem("AllMastersData",JSON.stringify(e))},f=async()=>{let e=await u();e!==null&&e&&m({inData:e})},L=()=>{let e=document.getElementById("AllMastersHeaderId");e!==null&&e.addEventListener("click",f)};L();let I=()=>{let e=localStorage.getItem("AllMastersData"),t=JSON.parse(e);for(const[a,o]of Object.entries(t)){let r=`${a}DLId`,l=document.getElementById(r);l!==null&&g({inDataListId:l,inDataArray:o})}};function g({inDataListId:e,inDataArray:t}){e.innerHTML="",t.forEach(a=>{var o=document.createElement("option");o.value=a,e.appendChild(o)})}let y=()=>{let e=document.getElementById("HeaderToDataListId");e!==null&&e.addEventListener("click",I)};y();const h=()=>j("KSToken")!=="",j=e=>document.cookie.split("; ").reduce((t,a)=>a.startsWith(e+"=")?a.split("=")[1]:t,""),p=()=>{const e=document.getElementById("LoginModalId");e.addEventListener("shown.bs.modal",function(){document.getElementById("UsernameId").focus()}),new bootstrap.Modal(e,{focus:!0}).show()};let S=()=>!(U()===!1||V()===!1);const U=()=>{let e=document.getElementById("UsernameId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},V=()=>{let e=document.getElementById("PasswordId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},B="POST",F={Accept:"application/json","Content-Type":"application/json"},N="",s={method:B,headers:F,body:N};let v=()=>{let e={},t=document.getElementById("UsernameId").value,a=document.getElementById("PasswordId").value;return e.UserName=t,e.Password=a,e},E=()=>(s.body=JSON.stringify(v()),s),$=async()=>{let e=E();return await await fetch("/Login/bin/Branch/UsingJwt/CreateToken",e)};const c=()=>{w(),M(),b()};let w=()=>{let t=document.getElementById("UserName"),a=localStorage.getItem("UserName");if(t!==null)return t.innerHTML=a},M=()=>{let t=document.getElementById("BranchLogOutId");const o=localStorage.getItem("BranchName").replace("BranOrders","");t!==null&&(t.innerHTML=o)},b=()=>{let t=document.getElementById("UserNameId"),a=localStorage.getItem("UserName");if(t!==null)return t.innerHTML=a},P=async({Status:e,inSuccessFunc:t})=>{let a=e;const o="BranchName";let r=localStorage.getItem("UserUuId");if(a.status===200){T(),c();const l=O("KSToken");if(l){const n=C(l);n&&(console.log(n),n.UserUuId!=r&&(localStorage.setItem(o,`BranOrders${n.Branch}`),localStorage.setItem("UserName",n.UserName),localStorage.setItem("UserUuId",n.UserUuId),window.location.href=""))}t()}a.status===401&&k()};const O=e=>{const a=`; ${document.cookie}`.split(`; ${e}=`);return a.length===2?a.pop().split(";").shift():null},C=e=>{try{const[t,a,o]=e.split(".");return JSON.parse(atob(a))}catch(t){return console.error("Error decoding JWT payload:",t),null}};let T=()=>{const e=document.getElementById("LoginModalId"),t=bootstrap.Modal.getInstance(e);t&&t.hide()},k=()=>{let e=document.getElementById("UsernameId"),t=document.getElementById("PasswordId");e.classList.add("is-invalid"),t.classList.add("is-invalid")},H=async({inSuccessFunc:e})=>{if(S()){let t=await $();P({Status:t,inSuccessFunc:e})}},D=({inSuccessFunc:e})=>{document.getElementById("LoginButtonId").addEventListener("click",async()=>{await H({inSuccessFunc:e})})},A=({inSuccessFunc:e})=>{D({inSuccessFunc:e})};const J=({inSuccessFunc:e})=>{if(h()===!0)return c(),!0;p(),A({inSuccessFunc:e})};export{J as S};
