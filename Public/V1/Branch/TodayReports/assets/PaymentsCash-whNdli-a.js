import{S as i}from"./EntryFile-CdBuo5Hp.js";let n=async()=>{document.getElementById("RefreshBSTableId").click()};const u="binV3",m="Custom/Cleaning/Branch/Today/V1/AmountSplit/Cash",d={StartRoute:u,Url:m};let f=async()=>{let t=localStorage.getItem("BranchName"),e=`/${d.Url}/${t}`;return await await fetch(e)},h=async()=>{let t=await f();if(t.status===200)return S({inData:await t.json()})};const S=({inData:t})=>t.map(a=>(a.VouherName="Receipts",a));let L=()=>{var t=$("#table");let a=B().sort((r,o)=>r.value-o.value);t.bootstrapTable("load",a)};const B=()=>jVarGlobalPresentViewData.sort((t,e)=>{const a=t.Date,r=e.Date;return a<r?-1:a>r?1:0});let V=async()=>{try{let[t]=await Promise.all([h()]);jVarGlobalPresentViewData=[...t],L()}catch(t){console.log("error from Promise all : ",t),alert("error from Promise All")}},j=()=>{let t=document.getElementById("RefreshBSTableId");t!==null&&t.addEventListener("click",V)},F=()=>{j()};const w="#toolbar",b="true",R="true",g="pk",C="true",I="[5, 10, 25 ]",p="5",y=[],N="",D=[{field:"KS-Serial",title:"#",formatter:"jFGlobalSerialColumn"},{field:"pk",title:"Order #"},{field:"CustomerData.CustomerName",title:"Customer Name"},{field:"CustomerData.CustomerMobile",title:"Mobile"},{field:"TotalPcs",title:"Pcs",align:"right",footerFormatter:"totalFormatter"},{field:"DiscountPer",title:"Dis %",align:"right",footerFormatter:"totalFormatter"},{field:"DiscountAmount",title:"Dis Amount",align:"right",footerFormatter:"totalFormatter"},{field:"CashAmount",title:"Cash",footerFormatter:"totalFormatter",align:"right"}],c={toolbar:w,search:b,searchable:R,idfield:g,showFooter:C,pageList:I,pageSize:p,data:y,onClickRow:N,columns:D};let T=async({inFromFetch:t})=>{t.KTF===!1?Swal.fire({icon:"warning",text:t.KReason}):t.QrCodesRaised===0?Swal.fire({icon:"error",title:"Not Raised",text:"Product Details are Empty"}):(P(),Swal.fire({icon:"success",title:"Raised",text:" QrCodes raised successfully"}).then(a=>{if(a.isConfirmed){const r=new URL(window.location.href),o=new URLSearchParams(r.search);let l=new URL("./TodayQrPrint.html",r);const s=new URL(`${l.href}?${o}`);window.location.href=s.href}}))};const P=()=>{document.getElementById("RefreshBSTableId").click()},A=async({inRowData:t})=>{let e=t.UuId;t.OrderData.BranchName;let r=`/Custom/Clients/Laundry/Qrcodes/Generate/${localStorage.getItem("BranchName")}/${e}`,l=await(await fetch(r)).json();return T({inFromFetch:l}),l};let U=async({inRowData:t})=>{Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ok",focusCancel:!0,focusButtonColor:"#0000ff"}).then(e=>{e.isConfirmed&&A({inRowData:t}).then(a=>{})})};const k=(t,e,a)=>{a==="QRRaise"&&U({inRowData:t})},v=()=>{var t=$("#table");c.onClickRow=k,t.bootstrapTable(c)};let E=()=>{let e=document.getElementById("BranchNameId");const r=localStorage.getItem("BranchName").replace("BranOrders","");e!==null&&(e.innerHTML=r)};const x=()=>{E(),v(),F()},H=()=>{x(),i({inSuccessFunc:n})&&n().then()};H();
