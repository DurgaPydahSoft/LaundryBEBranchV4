import{S as v}from"./EntryFile-BphKqlzn.js";const y=()=>{let t=localStorage.getItem("CustomerNames");if(t===null){document.getElementById("MasterButtonId").click();return}let e=JSON.parse(t),l=document.getElementById("CustomersDataListId");e.forEach(a=>{let n=document.createElement("option");n.value=`${a.CustomerName}:${a.Mobile}`,n.innerHTML=`${a.CustomerName}:${a.Mobile}`,l.appendChild(n)})},N="binV4",B="Masters",k="CustomerNames",R="Custom/Cleaning/Branch/Order/NewOrderV1/TodayCustomerFilter",E={OrderKey:"CustomerNames",ItemNamesKey:"ItemNames",AddOnsKey:"AddOns"},x={NewOrderButtonId:{PostFetch1:"/Custom/Cleaning/Branch/Order/NewOrderV1/InSertOrder",PostFetch2:"/Custom/Cleaning/Branch/Order/NewOrderV1",PostFetch:"/Custom/Cleaning/Branch/Order/NewOrderV2",RedirectUrl:{"500Status":"/Laundry/Branch/NewOrders/HtmlFiles/AddItemsWBtns.html","200Status":"AddItemsWBtns.html"}},AddItemsButtonId:{PostFetch:"/Custom/Cleaning/Branch/Order/NewOrder",RedirectUrl:{"500Status":"/Laundry/Branch/NewOrders/HtmlFiles/AddItemsWBtns.html","200Status":"AddItemsTotalRight.html"}}},f={routePath:N,folderName:B,tableName:k,TodayUrl:R,localStorageKeys:E,Urls:x};let P=async()=>{let t=f.TodayUrl,e=localStorage.getItem("BranchName"),n=document.getElementById("CustomerNameInputId").value.replace(/\D/g,""),o=`/${t}/${e}/${n}`;return await await fetch(o)},M=t=>{let a=H({inData:t}).sort((i,d)=>i.pk===d.pk?0:i.pk<d.pk?1:-1);console.log("jVarLocalOrdered:",a);var n=$("#table"),o=$("#YesterdayTableId"),c=$("#ThisWeekTableId"),s=$("#AllTableId");n.bootstrapTable("load",a),o.bootstrapTable("load",[]),c.bootstrapTable("load",[]),s.bootstrapTable("load",[])},H=({inData:t})=>{let e=t,l=[];return l=e.map(a=>{a.AggValues={},a.AggValues.ItemDetails=`${Object.keys(a.ItemsInOrder).length} / ${Object.values(a.ItemsInOrder).map(o=>o.Pcs).reduce((o,c)=>o+parseInt(c),0)}`,a.AggValues.SettlementAmount="",Object.values(a.CheckOutData)[0]&&(a.AggValues.SettlementAmount=Object.values(a.CheckOutData)[0].CardAmount+Object.values(a.CheckOutData)[0].CashAmount+Object.values(a.CheckOutData)[0].UPIAmount,a.IsSettled=!1),Object.keys(a.CheckOutData).length>0&&(a.IsSettled=!0);let n=Object.values(a.AddOnData);return a.AggValues.ItemsArray=Object.values(a.ItemsInOrder).map(o=>(o.AddOnDataAsArray=n.filter(c=>c.AddOnItemSerial===o.ItemSerial),o)),a}),l},K=t=>{var e=$("#table"),l=$("#YesterdayTableId"),a=$("#ThisWeekTableId"),n=$("#AllTableId");e.bootstrapTable("load",[]),l.bootstrapTable("load",[]),a.bootstrapTable("load",[]),n.bootstrapTable("load",[])},J=async t=>{let e=t;e.status===200&&M(await e.json()),e.status===500&&K(await e.json())},U=async()=>{let t=await P();J(t)};const F=()=>{U()};let W=()=>{document.getElementById("CustomerNameInputId").addEventListener("keypress",l=>{l.key==="Enter"&&F()})},z=async()=>{let t=document.getElementById("CustomerNameInputId");if(t.value==="")return t.classList.add("is-invalid"),!1;let e=await G();return console.log("LocalFech:",e),e===!1?(t.classList.add("is-invalid"),!1):!0};const G=async()=>{let e=document.getElementById("CustomerNameInputId").value.split(":")[1],l=`/${f.routePath}/MastersCustomers/Show/Filter/Mobile/${e}`;return(await fetch(l)).status!==500},Y="POST",X={Accept:"application/json","Content-Type":"application/json"},q={},L={method:Y,headers:X,body:q};let Q=()=>{let e=Z().split(":")[1],l=localStorage.getItem("UserName");return L.body.inMobileNumber=e,L.body.UserName=l,L.body=JSON.stringify(L.body),L},Z=()=>{let e=document.getElementById("CustomerNameInputId");if(e!==null)return e.value.trim()},_=async()=>{let t=Q(),e=localStorage.getItem("BranchName"),l=`${f.Urls.NewOrderButtonId.PostFetch}/${e}`;return await await fetch(l,t)},tt=()=>{window.location=f.Urls.NewOrderButtonId.RedirectUrl["200Status"]},et=({inresponse:t})=>{Swal.fire({title:"Error Alert",text:`${t}`,icon:"error",confirmButtonColor:"#3085d6",showDenyButton:!0,denyButtonText:"Add ItemsV1",denyButtonColor:"#008000"}).then(e=>{(e.isConfirmed||e.isDismissed)&&(window.location.href=""),e.isDenied&&(window.location.href=f.Urls.NewOrderButtonId.RedirectUrl["500Status"])})},at=async()=>{let t=await _();t.status===200&&tt(),t.status===500&&et({inresponse:await t.text()})};const lt=async()=>{await z()&&at()};let nt=()=>{document.getElementById("NewOrderButtonId").addEventListener("click",lt)},ot=()=>{document.getElementById("CustomerNameSearchButtonId").addEventListener("click",F)},rt=async()=>{let t=f.localStorageKeys.OrderKey,a=await(await fetch("/Custom/Cleaning/Masters/V2/Customers/DataOnly")).json();console.log(a);let n=a.sort((o,c)=>o.CustomerName-c.CustomerName);a.sort(function(o,c){var s=c.CustomerName.toLowerCase(),i=o.CustomerName.toLowerCase();return i<s?-1:i>s?1:0}),localStorage.setItem(t,JSON.stringify(n))},ct=async()=>{let t=f.localStorageKeys.ItemNamesKey,a=await(await fetch("/Custom/Cleaning/Masters/V2/ItemNames/DataOnly")).json();localStorage.setItem(t,JSON.stringify(a))},it=async()=>{let t=f.localStorageKeys.AddOnsKey,a=await(await fetch("/Custom/Cleaning/Masters/V2/AddOns/DataOnly")).json();localStorage.setItem(t,JSON.stringify(a))},st=()=>{rt().then(()=>{dt()}),ct().then(),it().then()};const dt=()=>{let t=localStorage.getItem("CustomerNames");if(t!==null){let e=JSON.parse(t),l=document.getElementById("CustomersDataListId");l.innerHTML="",e.forEach(a=>{let n=document.createElement("option");n.value=`${a.CustomerName}:${a.Mobile}`,n.innerHTML=`${a.CustomerName}:${a.Mobile}`,l.appendChild(n)})}};let ut=()=>{document.getElementById("MasterButtonId").addEventListener("click",()=>{st()})},mt=()=>{const e=localStorage.getItem("BranchName").replace("BranOrders","");let l=document.getElementById("BranchButtonId");l.innerText=e,l.addEventListener("click",function(){window.location.href="/LoginUsers/HtmlFiles/loginBranch.html"})};const ft="binV4",Ft="MastersCustomers",Lt="Custom/Cleaning/Branch/Order/NewOrderV1/YesterdayCustomerFilter",$t={routePath:ft,tableName:Ft,url:Lt};let pt=async()=>{let t=$t.url,e=localStorage.getItem("BranchName");const a=It().split(":")[1].trim();let n=`/${t}/${e}/${a}`;return await await fetch(n)},It=()=>{let e=document.getElementById("CustomerNameInputId");if(e!==null)return e.value.trim()},jt=({inData:t})=>{let a=St({inData:t}).sort((o,c)=>o.pk===c.pk?0:o.pk<c.pk?1:-1);var n=$("#YesterdayTableId");n.bootstrapTable("load",a)},St=({inData:t})=>{let e=t,l=[];return l=e.map(a=>{a.AggValues={},a.AggValues.ItemDetails=`${Object.keys(a.ItemsInOrder).length} / ${Object.values(a.ItemsInOrder).map(o=>o.Pcs).reduce((o,c)=>o+parseInt(c),0)}`,a.AggValues.SettlementAmount="",Object.values(a.CheckOutData)[0]&&(a.AggValues.SettlementAmount=Object.values(a.CheckOutData)[0].CardAmount+Object.values(a.CheckOutData)[0].CashAmount+Object.values(a.CheckOutData)[0].UPIAmount,a.IsSettled=!1),Object.keys(a.CheckOutData).length>0&&(a.IsSettled=!0);let n=Object.values(a.AddOnData);return a.AggValues.ItemsArray=Object.values(a.ItemsInOrder).map(o=>(o.AddOnDataAsArray=n.filter(c=>c.AddOnItemSerial===o.ItemSerial),o)),a}),l},Vt=async()=>{let t=await pt();t.status===200&&jt({inData:await t.json()})},Ct=()=>{document.getElementById("YesterdayRefreshButtonId").addEventListener("click",Vt)};const bt="binV4",gt="MastersCustomers",ht="Custom/Cleaning/Branch/Order/NewOrderV1/WeekCustomerFilter",Ot={routePath:bt,tableName:gt,url:ht};let At=async()=>{let t=Ot.url,e=localStorage.getItem("BranchName");const a=Tt().split(":")[1].trim();let n=`/${t}/${e}/${a}`;return await await fetch(n)},Tt=()=>{let e=document.getElementById("CustomerNameInputId");if(e!==null)return e.value.trim()},yt=({inData:t})=>{let a=Dt({inData:t}).sort((o,c)=>o.pk===c.pk?0:o.pk<c.pk?1:-1);var n=$("#ThisWeekTableId");n.bootstrapTable("load",a)},Dt=({inData:t})=>{let e=t,l=[];return l=e.map(a=>{a.AggValues={},a.AggValues.ItemDetails=`${Object.keys(a.ItemsInOrder).length} / ${Object.values(a.ItemsInOrder).map(o=>o.Pcs).reduce((o,c)=>o+parseInt(c),0)}`,a.AggValues.SettlementAmount="",Object.values(a.CheckOutData)[0]&&(a.AggValues.SettlementAmount=Object.values(a.CheckOutData)[0].CardAmount+Object.values(a.CheckOutData)[0].CashAmount+Object.values(a.CheckOutData)[0].UPIAmount,a.IsSettled=!1),Object.keys(a.CheckOutData).length>0&&(a.IsSettled=!0);let n=Object.values(a.AddOnData);return a.AggValues.ItemsArray=Object.values(a.ItemsInOrder).map(o=>(o.AddOnDataAsArray=n.filter(c=>c.AddOnItemSerial===o.ItemSerial),o)),a}),l},wt=async()=>{let t=await At();t.status===200&&yt({inData:await t.json()})},vt=()=>{document.getElementById("ThisWeekRefreshButtonId").addEventListener("click",wt)};const Nt="binV4",Bt="MastersCustomers",kt="Custom/Cleaning/Branch/Order/NewOrderV1/AllCustomerFilter",Rt={routePath:Nt,tableName:Bt,url:kt};let Et=async()=>{let t=Rt.url,e=localStorage.getItem("BranchName");const a=xt().split(":")[1].trim();let n=`/${t}/${e}/${a}`;return await await fetch(n)},xt=()=>{let e=document.getElementById("CustomerNameInputId");if(e!==null)return e.value.trim()},Pt=({inData:t})=>{let a=Mt({inData:t}).sort((o,c)=>o.pk===c.pk?0:o.pk<c.pk?1:-1);var n=$("#AllTableId");n.bootstrapTable("load",a)},Mt=({inData:t})=>{let e=t,l=[];return l=e.map(a=>{a.AggValues={},a.AggValues.ItemDetails=`${Object.keys(a.ItemsInOrder).length} / ${Object.values(a.ItemsInOrder).map(o=>o.Pcs).reduce((o,c)=>o+parseInt(c),0)}`,a.AggValues.SettlementAmount="",Object.values(a.CheckOutData)[0]&&(a.AggValues.SettlementAmount=Object.values(a.CheckOutData)[0].CardAmount+Object.values(a.CheckOutData)[0].CashAmount+Object.values(a.CheckOutData)[0].UPIAmount,a.IsSettled=!1),Object.keys(a.CheckOutData).length>0&&(a.IsSettled=!0);let n=Object.values(a.AddOnData);return a.AggValues.ItemsArray=Object.values(a.ItemsInOrder).map(o=>(o.AddOnDataAsArray=n.filter(c=>c.AddOnItemSerial===o.ItemSerial),o)),a}),l},Ht=async()=>{let t=await Et();t.status===200&&Pt({inData:await t.json()})},Kt=()=>{document.getElementById("AllRefreshButtonId").addEventListener("click",Ht)},Jt=()=>{Ct(),vt(),Kt()};const Ut="/Custom/Cleaning/Masters/V2/Customers/Filter/Mobile/{MobileNumber}",Wt={GetEndPoint:Ut};let zt=async()=>{let t=Wt.GetEndPoint;const l=Gt().split(":")[1].trim(),a=t.replace("{MobileNumber}",l);return await await fetch(a)},Gt=()=>{let e=document.getElementById("CustomerNameInputId");if(e!==null)return e.value.trim()},Yt=({inData:t})=>{Xt({inValue:t.pk}),qt({inValue:t.CustomerName}),Qt({inValue:t.Mobile}),Zt({inValue:t.DOB}),te({inValue:t.City}),ee({inValue:t.Occupation}),ae({inValue:t.CompanyName}),_t({inValue:t.GSTNumber})},Xt=({inValue:t})=>{let l=document.getElementById("pkId");l!==null&&(l.value=t)},qt=({inValue:t})=>{let l=document.getElementById("CustomerName");l!==null&&(l.value=t)},Qt=({inValue:t})=>{let l=document.getElementById("CustomerMobileNumber");l!==null&&(l.value=t)},Zt=({inValue:t})=>{let l=document.getElementById("dob");l!==null&&(l.value=t)},_t=({inValue:t})=>{let l=document.getElementById("CustomerGST");l!==null&&(l.value=t)},te=({inValue:t})=>{let l=document.getElementById("CustomerLocation");l!==null&&(l.value=t)},ee=({inValue:t})=>{let l=document.getElementById("CustomerOccupation");l!==null&&(l.value=t)},ae=({inValue:t})=>{let l=document.getElementById("CustomerCompany");l!==null&&(l.value=t)},le=({inData:t})=>{Yt({inData:t})},ne=({inResponse:t})=>{Swal.fire({text:`${t}`,icon:"error",title:"check"})},oe=async({inResponse:t})=>{let e=await t;if(e.status===200){let l=await e.json();le({inData:l[0]})}if(e.status===500){let l=await e.text();ne({inResponse:l})}};const re=async()=>{let t=await zt();oe({inResponse:t})};let ce=()=>{document.getElementById("CustomerAlter").addEventListener("click",re)},ie=()=>{ce()};const se="PUT",de={Accept:"application/json","Content-Type":"application/json"},ue="",D={method:se,headers:de,body:ue};let me=()=>{let t=document.getElementById("FormId");return D.body=JSON.stringify(fe(t)),D};function fe(t){var e=new FormData(t),l={};for(var[a,n]of e)l[a]?(Array.isArray(l[a])||(l[a]=[l[a]]),l[a].push(n)):l[a]=n;return l}const Fe="/Custom/Cleaning/Masters/V1/Customers",Le="MastersCustomers",$e={url:Fe,tableName:Le};let pe=async()=>{let t=$e.url,e=Ie(),l=me(),a=`${t}/${e}`;return await await fetch(a,l)},Ie=()=>{let e=document.getElementById("pkId");if(e!==null)return e.value.trim()},je=()=>{let e=document.getElementById("FormId").querySelectorAll("[required]"),l=!0;return e.forEach(a=>{if(a.value.trim().length===0){a.classList.add("is-invalid"),l=!1;return}if(a.value.trim().length>0&&a.classList.remove("is-invalid"),a.name==="Mobile"&&a.value.trim().length!==10){document.getElementById("MobileClass").innerHTML="must be 10",a.classList.add("is-invalid"),a.focus(),l=!1;return}if(a.name==="AddOnRate"&&!(a.value.trim().length<4)){l=!1;return}}),l},Se=({inFetchData:t})=>{$("#editCustomerModal").modal("hide")},Ve=async()=>{if(je()){let e=await pe();Se({inResponse:e})}},Ce=()=>{let t=document.getElementById("ModelAlter");t!==null&&t.addEventListener("click",Ve)},be=()=>{Ce()},ge=()=>{W(),nt(),ot(),ut(),mt(),Jt(),ie(),be()};const he=()=>{let t=w({inGetKey:"CustomerMobile"}),e=w({inGetKey:"CustomerName"});if(t!==null&&e!==null){let l=`${e}:${t}`;Oe(l)}};let Oe=t=>{let l=document.getElementById("CustomerNameInputId");l!==null&&(l.value=t)},w=({inGetKey:t})=>{const e=window.location.search;return new URLSearchParams(e).get(t)};const Ae="#toolbar",Te="pk",ye="true",De=[],we="",ve="",Ne=[{field:"KS-Serial",title:"#"},{field:"AddOnService",title:"AddOnService"},{field:"AddOnRate",title:"AddOnRate"}],h={toolbar:Ae,idfield:Te,showFooter:ye,data:De,onClickRow:we,icons:ve,columns:Ne};let Be=({inFindColumn:t})=>{t.formatter=ke},ke=(t,e,l)=>l+1,Re=({inFindColumn:t})=>{t.footerFormatter=Ee};function Ee(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,n){return a+n},0).toFixed(0)}let xe=({inColumns:t})=>{let e=t,l=e.find(n=>n.field==="KS-Serial"),a=e.find(n=>n.field==="AddOnRate");l!==void 0&&Be({inFindColumn:l}),a!==void 0&&Re({inFindColumn:a})},Pe=(t,e,l)=>{let a=e.AddOnArray,o=document.getElementById("TemplateForAddOns").content.cloneNode("true");const s=new XMLSerializer().serializeToString(o);let i=l.html(s).find("table");h.data=a,xe({inColumns:h.columns}),i.bootstrapTable(h)};const Me="#toolbar",He="pk",Ke="true",Je=[],Ue=!0,We="",ze="",Ge="",Ye=[{field:"KS-Serial",title:"#"},{field:"ItemName",title:"ItemName"},{field:"Rate",title:"Rate"},{field:"Pcs",title:"Pcs"}],V={toolbar:Me,idfield:He,showFooter:Ke,data:Je,detailView:Ue,onClickRow:We,onExpandRow:ze,icons:Ge,columns:Ye};let Xe=({inFindColumn:t})=>{t.formatter=qe},qe=(t,e,l)=>l+1,Qe=({inFindColumn:t})=>{t.footerFormatter=Ze};function Ze(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,n){return a+n},0).toFixed(0)}let _e=({inFindColumn:t})=>{t.footerFormatter=ta};function ta(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,n){return a+n},0).toFixed(0)}let ea=({inColumns:t})=>{let e=t,l=e.find(o=>o.field==="KS-Serial"),a=e.find(o=>o.field==="Rate"),n=e.find(o=>o.field==="Pcs");l!==void 0&&Xe({inFindColumn:l}),a!==void 0&&Qe({inFindColumn:a}),n!==void 0&&_e({inFindColumn:n})},aa=(t,e,l)=>{let a=e.AggValues.ItemsArray,o=document.getElementById("TemplateForItemNames").content.cloneNode("true");const s=new XMLSerializer().serializeToString(o);let i=l.html(s).find("table");V.data=a,V.onExpandRow=Pe,ea({inColumns:V.columns}),i.bootstrapTable(V)};const la="bi-plus-circle fs-4",na="bi-dash-circle fs-4",oa={detailOpen:la,detailClose:na},ra="#toolbar",ca="pk",ia="true",sa=[],da=!0,ua="",ma="",fa="",Fa=[{field:"pk",title:"Order#"},{field:"OrderData.Currentdateandtime",title:"Date",formatter:"LocalDate",visible:!1},{field:"DateTime",title:"Time Span",formatter:"TimeDiff",class:"d-none d-sm-table-cell"},{field:"AggValues.ItemDetails",title:"Items",footerFormatter:"ItemsFormatter",class:"d-none d-sm-table-cell"},{field:"AggValues.SettlementAmount",title:"Settlement",footerFormatter:"priceFormatter",align:"right",class:"d-none d-sm-table-cell"},{field:"IsSettled",title:"IsSettled",formatter:""},{title:"Opts.",field:"Opts",align:"center",formatter:""}],p={toolbar:ra,idfield:ca,showFooter:ia,data:sa,detailView:da,onClickRow:ua,onExpandRow:ma,icons:fa,columns:Fa};let La=async({inFromFetch:t})=>{t.KTF===!1?Swal.fire({icon:"warning",text:t.KReason}):F()};const $a=async({inRowData:t})=>{let e=t.pk,a=`/Custom/Cleaning/Branch/Today/Orders/OnlyOrders/${localStorage.getItem("BranchName")}/${e}`,c=await(await fetch(a,{method:"delete",headers:{Accept:"application/json","Content-Type":"application/json"}})).json();return La({inFromFetch:c}),c};let pa=async({inRowData:t})=>{Swal.fire({title:"Are you sure to delete?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Delete",focusCancel:!0,focusButtonColor:"#0000ff"}).then(e=>{e.isConfirmed&&$a({inRowData:t}).then(l=>{})})};const Ia=(t,e,l)=>{l==="Opts"&&(t.IsSettled||pa({inRowData:t}))};let ja=({inFindColumn:t})=>{t.formatter=Sa},Sa=(t,e,l)=>l+1,Va=({inFindColumn:t})=>{t.footerFormatter=ba,t.formatter=Ca};const Ca=(t,e,l)=>t===""?"":`₹ ${t}`;function ba(t){return"₹ "+t.map(function(e){return+e.AggValues.SettlementAmount}).reduce(function(e,l){return e+l},0)}let ga=({inFindColumn:t})=>{t.footerFormatter=ha};function ha(t){this.field;var e=t.map(function(a){return+a.AggValues.ItemDetails.split(" / ")[1]}).reduce(function(a,n){return a+n},0),l=t.map(function(a){return+a.AggValues.ItemDetails.split(" / ")[0]}).reduce(function(a,n){return a+n},0);return`${l}/${e}`}const Oa=({inFindColumn:t})=>{t.formatter=Aa},Aa=(t,e)=>{const l=e.AddOnArray;if(l&&l.length>0){const a=l.reduce((n,o)=>n+o.AddOnRate,0);return`<a href="#" class="btn btn-primary ">${l.length}-${a}</a>`}return"No"};let Ta=({inFindColumn:t})=>{t.formatter=ya};function ya(t,e,l){return e.IsSettled?[`<a href="./ExitOrderItems.html?OrderNumber=${e.pk}" class="link-danger">`,'<i class="bi bi-dropbox"></i>',"</a>"].join(""):['<a href="#" class="link-danger DeleteClass">','<i class="bi bi-trash"></i>',"</a>"].join("")}let Da=({inFindColumn:t})=>{t.formatter=wa,t.footerFormatter=va};function wa(t,e,l){let a=localStorage.getItem("PresentOrder"),n=JSON.parse(a),o=e.ItemSerial,c=Object.values(n.AddOnData).filter(s=>s.AddOnItemSerial===o);return c.length>0?c.map(i=>i.AddOnRate).reduce((i,d)=>i+d,0)*e.Pcs+e.Total:e.Total}function va(t){return this.field,"₹ "+t.map(function(e){return+e.Total}).reduce(function(e,l){return e+l},0)}let Na=({inFindColumn:t})=>{t.formatter=Ba};const Ba=t=>{if(t===void 0)return"";var e=new Date-new Date(t),l=Math.floor(e/864e5),a=Math.floor(e%864e5/36e5),n=Math.round(e%864e5%36e5/6e4);return l+" days, "+a+" hours, "+n+" min..."};let ka=({inFindColumn:t})=>{t.footerFormatter=Ra};function Ra(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,n){return a+n},0).toFixed(0)}let Ea=({inFindColumn:t})=>{t.formatter=xa},xa=(t,e,l)=>new Date(t).toLocaleDateString("en-GB"),Pa=({inFindColumn:t})=>{t.formatter=Ma},Ma=(t,e,l)=>(console.log("value : ",t),t===!0?'<span class="badge bg-success"><b>✓</b></span>':'<span class="badge bg-danger">✘</span>'),Ha=({inColumns:t})=>{let e=t,l=e.find(r=>r.field==="KS-Serial"),a=e.find(r=>r.field==="AggValues.SettlementAmount"),n=e.find(r=>r.field==="AggValues.ItemDetails"),o=e.find(r=>r.field==="KS-AddOns"),c=e.find(r=>r.field==="Opts"),s=e.find(r=>r.field==="KS-Amount"),i=e.find(r=>r.field==="DateTime");e.find(r=>r.field==="ItemName");let d=e.find(r=>r.field==="Pcs");e.find(r=>r.field==="location");let u=e.find(r=>r.field==="DeliveryDateTime");e.find(r=>r.field==="ItemService");let m=e.find(r=>r.field==="IsSettled");l!==void 0&&ja({inFindColumn:l}),a!==void 0&&Va({inFindColumn:a}),n!==void 0&&ga({inFindColumn:n}),o!==void 0&&Oa({inFindColumn:o}),c!==void 0&&Ta({inFindColumn:c}),s!==void 0&&Da({inFindColumn:s}),i!==void 0&&Na({inFindColumn:i}),d!==void 0&&ka({inFindColumn:d}),u!==void 0&&Ea({inFindColumn:u}),m!==void 0&&Pa({inFindColumn:m})};const Ka=()=>{var t=$("#table");p.icons=oa,p.onExpandRow=aa,p.onClickRow=Ia,Ha({inColumns:p.columns}),t.bootstrapTable(p)},Ja="#toolbar",Ua="pk",Wa="true",za=[],Ga="",Ya="",Xa=[{field:"KS-Serial",title:"#"},{field:"AddOnService",title:"AddOnService"},{field:"AddOnRate",title:"AddOnRate"}],O={toolbar:Ja,idfield:Ua,showFooter:Wa,data:za,onClickRow:Ga,icons:Ya,columns:Xa};let qa=({inFindColumn:t})=>{t.formatter=Qa},Qa=(t,e,l)=>l+1,Za=({inFindColumn:t})=>{t.footerFormatter=_a};function _a(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,n){return a+n},0).toFixed(0)}let tl=({inColumns:t})=>{let e=t,l=e.find(n=>n.field==="KS-Serial"),a=e.find(n=>n.field==="AddOnRate");l!==void 0&&qa({inFindColumn:l}),a!==void 0&&Za({inFindColumn:a})},el=(t,e,l)=>{let a=e.AddOnArray,o=document.getElementById("TemplateForAddOns").content.cloneNode("true");const s=new XMLSerializer().serializeToString(o);let i=l.html(s).find("table");O.data=a,tl({inColumns:O.columns}),i.bootstrapTable(O)};const al="#toolbar",ll="pk",nl="true",ol=[],rl=!0,cl="",il="",sl="",dl=[{field:"KS-Serial",title:"#"},{field:"ItemName",title:"ItemName"},{field:"Rate",title:"Rate"},{field:"Pcs",title:"Pcs"}],C={toolbar:al,idfield:ll,showFooter:nl,data:ol,detailView:rl,onClickRow:cl,onExpandRow:il,icons:sl,columns:dl};let ul=({inFindColumn:t})=>{t.formatter=ml},ml=(t,e,l)=>l+1,fl=({inFindColumn:t})=>{t.footerFormatter=Fl};function Fl(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,n){return a+n},0).toFixed(0)}let Ll=({inFindColumn:t})=>{t.footerFormatter=$l};function $l(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,n){return a+n},0).toFixed(0)}let pl=({inColumns:t})=>{let e=t,l=e.find(o=>o.field==="KS-Serial"),a=e.find(o=>o.field==="Rate"),n=e.find(o=>o.field==="Pcs");l!==void 0&&ul({inFindColumn:l}),a!==void 0&&fl({inFindColumn:a}),n!==void 0&&Ll({inFindColumn:n})},Il=(t,e,l)=>{let a=e.AggValues.ItemsArray,o=document.getElementById("TemplateForItemNames").content.cloneNode("true");const s=new XMLSerializer().serializeToString(o);let i=l.html(s).find("table");C.data=a,C.onExpandRow=el,pl({inColumns:C.columns}),i.bootstrapTable(C)};const jl="bi-plus-circle fs-4",Sl="bi-dash-circle fs-4",Vl={detailOpen:jl,detailClose:Sl},Cl="#toolbar",bl="pk",gl="true",hl=[],Ol=!0,Al="",Tl="",yl="",Dl=[{field:"pk",title:"Order#"},{field:"OrderData.Currentdateandtime",title:"Date",formatter:"LocalDate",visible:!1},{field:"DateTime",title:"Time Span",formatter:"TimeDiff",class:"d-none d-sm-table-cell"},{field:"AggValues.ItemDetails",title:"Items",footerFormatter:"ItemsFormatter",class:"d-none d-sm-table-cell"},{field:"AggValues.SettlementAmount",title:"Settlement",footerFormatter:"priceFormatter",align:"right",class:"d-none d-sm-table-cell"},{field:"IsSettled",title:"IsSettled",formatter:""},{title:"Opts.",field:"Opts",align:"center",formatter:""}],I={toolbar:Cl,idfield:bl,showFooter:gl,data:hl,detailView:Ol,onClickRow:Al,onExpandRow:Tl,icons:yl,columns:Dl};let wl=async({inFromFetch:t})=>{t.KTF===!1?Swal.fire({icon:"warning",text:t.KReason}):F()};const vl=async({inRowData:t})=>{let e=t.pk,a=`/Custom/Cleaning/Branch/Today/Orders/OnlyOrders/${localStorage.getItem("BranchName")}/${e}`,c=await(await fetch(a,{method:"delete",headers:{Accept:"application/json","Content-Type":"application/json"}})).json();return wl({inFromFetch:c}),c};let Nl=async({inRowData:t})=>{Swal.fire({title:"Are you sure to delete?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Delete",focusCancel:!0,focusButtonColor:"#0000ff"}).then(e=>{e.isConfirmed&&vl({inRowData:t}).then(l=>{})})};const Bl=(t,e,l)=>{l==="Opts"&&(t.IsSettled||Nl({inRowData:t}))};let kl=({inFindColumn:t})=>{t.formatter=Rl},Rl=(t,e,l)=>l+1,El=({inFindColumn:t})=>{t.footerFormatter=Pl,t.formatter=xl};const xl=(t,e,l)=>t===""?"":`₹ ${t}`;function Pl(t){return"₹ "+t.map(function(e){return+e.AggValues.SettlementAmount}).reduce(function(e,l){return e+l},0)}let Ml=({inFindColumn:t})=>{t.footerFormatter=Hl};function Hl(t){this.field;var e=t.map(function(a){return+a.AggValues.ItemDetails.split(" / ")[1]}).reduce(function(a,n){return a+n},0),l=t.map(function(a){return+a.AggValues.ItemDetails.split(" / ")[0]}).reduce(function(a,n){return a+n},0);return`${l}/${e}`}const Kl=({inFindColumn:t})=>{t.formatter=Jl},Jl=(t,e)=>{const l=e.AddOnArray;if(l&&l.length>0){const a=l.reduce((n,o)=>n+o.AddOnRate,0);return`<a href="#" class="btn btn-primary ">${l.length}-${a}</a>`}return"No"};let Ul=({inFindColumn:t})=>{t.formatter=Wl};function Wl(t,e,l){return e.IsSettled?[`<a href="./ExitOrderItems.html?OrderNumber=${e.pk}" class="link-danger">`,'<i class="bi bi-dropbox"></i>',"</a>"].join(""):['<a href="#" class="link-danger DeleteClass">','<i class="bi bi-trash"></i>',"</a>"].join("")}let zl=({inFindColumn:t})=>{t.formatter=Gl,t.footerFormatter=Yl};function Gl(t,e,l){let a=localStorage.getItem("PresentOrder"),n=JSON.parse(a),o=e.ItemSerial,c=Object.values(n.AddOnData).filter(s=>s.AddOnItemSerial===o);return c.length>0?c.map(i=>i.AddOnRate).reduce((i,d)=>i+d,0)*e.Pcs+e.Total:e.Total}function Yl(t){return this.field,"₹ "+t.map(function(e){return+e.Total}).reduce(function(e,l){return e+l},0)}let Xl=({inFindColumn:t})=>{t.formatter=ql};const ql=t=>{if(t===void 0)return"";var e=new Date-new Date(t),l=Math.floor(e/864e5),a=Math.floor(e%864e5/36e5),n=Math.round(e%864e5%36e5/6e4);return l+" days, "+a+" hours, "+n+" min..."};let Ql=({inFindColumn:t})=>{t.footerFormatter=Zl};function Zl(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,n){return a+n},0).toFixed(0)}let _l=({inFindColumn:t})=>{t.formatter=tn},tn=(t,e,l)=>new Date(t).toLocaleDateString("en-GB"),en=({inFindColumn:t})=>{t.formatter=an},an=(t,e,l)=>(console.log("value : ",t),t===!0?'<span class="badge bg-success"><b>✓</b></span>':'<span class="badge bg-danger">✘</span>'),ln=({inColumns:t})=>{let e=t,l=e.find(r=>r.field==="KS-Serial"),a=e.find(r=>r.field==="AggValues.SettlementAmount"),n=e.find(r=>r.field==="AggValues.ItemDetails"),o=e.find(r=>r.field==="KS-AddOns"),c=e.find(r=>r.field==="Opts"),s=e.find(r=>r.field==="KS-Amount"),i=e.find(r=>r.field==="DateTime");e.find(r=>r.field==="ItemName");let d=e.find(r=>r.field==="Pcs");e.find(r=>r.field==="location");let u=e.find(r=>r.field==="DeliveryDateTime");e.find(r=>r.field==="ItemService");let m=e.find(r=>r.field==="IsSettled");l!==void 0&&kl({inFindColumn:l}),a!==void 0&&El({inFindColumn:a}),n!==void 0&&Ml({inFindColumn:n}),o!==void 0&&Kl({inFindColumn:o}),c!==void 0&&Ul({inFindColumn:c}),s!==void 0&&zl({inFindColumn:s}),i!==void 0&&Xl({inFindColumn:i}),d!==void 0&&Ql({inFindColumn:d}),u!==void 0&&_l({inFindColumn:u}),m!==void 0&&en({inFindColumn:m})};const nn="YesterdayTableId",on=()=>{var t=$(`#${nn}`);I.icons=Vl,I.onExpandRow=Il,I.onClickRow=Bl,ln({inColumns:I.columns}),t.bootstrapTable(I)},rn="#toolbar",cn="pk",sn="true",dn=[],un="",mn="",fn=[{field:"KS-Serial",title:"#"},{field:"AddOnService",title:"AddOnService"},{field:"AddOnRate",title:"AddOnRate"}],A={toolbar:rn,idfield:cn,showFooter:sn,data:dn,onClickRow:un,icons:mn,columns:fn};let Fn=({inFindColumn:t})=>{t.formatter=Ln},Ln=(t,e,l)=>l+1,$n=({inFindColumn:t})=>{t.footerFormatter=pn};function pn(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,n){return a+n},0).toFixed(0)}let In=({inColumns:t})=>{let e=t,l=e.find(n=>n.field==="KS-Serial"),a=e.find(n=>n.field==="AddOnRate");l!==void 0&&Fn({inFindColumn:l}),a!==void 0&&$n({inFindColumn:a})},jn=(t,e,l)=>{let a=e.AddOnArray,o=document.getElementById("TemplateForAddOns").content.cloneNode("true");const s=new XMLSerializer().serializeToString(o);let i=l.html(s).find("table");A.data=a,In({inColumns:A.columns}),i.bootstrapTable(A)};const Sn="#toolbar",Vn="pk",Cn="true",bn=[],gn=!0,hn="",On="",An="",Tn=[{field:"KS-Serial",title:"#"},{field:"ItemName",title:"ItemName"},{field:"Rate",title:"Rate"},{field:"Pcs",title:"Pcs"}],b={toolbar:Sn,idfield:Vn,showFooter:Cn,data:bn,detailView:gn,onClickRow:hn,onExpandRow:On,icons:An,columns:Tn};let yn=({inFindColumn:t})=>{t.formatter=Dn},Dn=(t,e,l)=>l+1,wn=({inFindColumn:t})=>{t.footerFormatter=vn};function vn(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,n){return a+n},0).toFixed(0)}let Nn=({inFindColumn:t})=>{t.footerFormatter=Bn};function Bn(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,n){return a+n},0).toFixed(0)}let kn=({inColumns:t})=>{let e=t,l=e.find(o=>o.field==="KS-Serial"),a=e.find(o=>o.field==="Rate"),n=e.find(o=>o.field==="Pcs");l!==void 0&&yn({inFindColumn:l}),a!==void 0&&wn({inFindColumn:a}),n!==void 0&&Nn({inFindColumn:n})},Rn=(t,e,l)=>{let a=e.AggValues.ItemsArray,o=document.getElementById("TemplateForItemNames").content.cloneNode("true");const s=new XMLSerializer().serializeToString(o);let i=l.html(s).find("table");b.data=a,b.onExpandRow=jn,kn({inColumns:b.columns}),i.bootstrapTable(b)};const En="bi-plus-circle fs-4",xn="bi-dash-circle fs-4",Pn={detailOpen:En,detailClose:xn},Mn="#toolbar",Hn="pk",Kn="true",Jn=[],Un=!0,Wn="",zn="",Gn="",Yn=[{field:"pk",title:"Order#"},{field:"OrderData.Currentdateandtime",title:"Date",formatter:"LocalDate",visible:!1},{field:"DateTime",title:"Time Span",formatter:"TimeDiff",class:"d-none d-sm-table-cell"},{field:"AggValues.ItemDetails",title:"Items",footerFormatter:"ItemsFormatter",class:"d-none d-sm-table-cell"},{field:"AggValues.SettlementAmount",title:"Settlement",footerFormatter:"priceFormatter",align:"right",class:"d-none d-sm-table-cell"},{field:"IsSettled",title:"IsSettled",formatter:""},{title:"Opts.",field:"Opts",align:"center",formatter:""}],j={toolbar:Mn,idfield:Hn,showFooter:Kn,data:Jn,detailView:Un,onClickRow:Wn,onExpandRow:zn,icons:Gn,columns:Yn};let Xn=async({inFromFetch:t})=>{t.KTF===!1?Swal.fire({icon:"warning",text:t.KReason}):F()};const qn=async({inRowData:t})=>{let e=t.pk,a=`/Custom/Cleaning/Branch/Today/Orders/OnlyOrders/${localStorage.getItem("BranchName")}/${e}`,c=await(await fetch(a,{method:"delete",headers:{Accept:"application/json","Content-Type":"application/json"}})).json();return Xn({inFromFetch:c}),c};let Qn=async({inRowData:t})=>{Swal.fire({title:"Are you sure to delete?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Delete",focusCancel:!0,focusButtonColor:"#0000ff"}).then(e=>{e.isConfirmed&&qn({inRowData:t}).then(l=>{})})};const Zn=(t,e,l)=>{l==="Opts"&&(t.IsSettled||Qn({inRowData:t}))};let _n=({inFindColumn:t})=>{t.formatter=to},to=(t,e,l)=>l+1,eo=({inFindColumn:t})=>{t.footerFormatter=lo,t.formatter=ao};const ao=(t,e,l)=>t===""?"":`₹ ${t}`;function lo(t){return"₹ "+t.map(function(e){return+e.AggValues.SettlementAmount}).reduce(function(e,l){return e+l},0)}let no=({inFindColumn:t})=>{t.footerFormatter=oo};function oo(t){this.field;var e=t.map(function(a){return+a.AggValues.ItemDetails.split(" / ")[1]}).reduce(function(a,n){return a+n},0),l=t.map(function(a){return+a.AggValues.ItemDetails.split(" / ")[0]}).reduce(function(a,n){return a+n},0);return`${l}/${e}`}const ro=({inFindColumn:t})=>{t.formatter=co},co=(t,e)=>{const l=e.AddOnArray;if(l&&l.length>0){const a=l.reduce((n,o)=>n+o.AddOnRate,0);return`<a href="#" class="btn btn-primary ">${l.length}-${a}</a>`}return"No"};let io=({inFindColumn:t})=>{t.formatter=so};function so(t,e,l){return e.IsSettled?[`<a href="./ExitOrderItems.html?OrderNumber=${e.pk}" class="link-danger">`,'<i class="bi bi-dropbox"></i>',"</a>"].join(""):['<a href="#" class="link-danger DeleteClass">','<i class="bi bi-trash"></i>',"</a>"].join("")}let uo=({inFindColumn:t})=>{t.formatter=mo,t.footerFormatter=fo};function mo(t,e,l){let a=localStorage.getItem("PresentOrder"),n=JSON.parse(a),o=e.ItemSerial,c=Object.values(n.AddOnData).filter(s=>s.AddOnItemSerial===o);return c.length>0?c.map(i=>i.AddOnRate).reduce((i,d)=>i+d,0)*e.Pcs+e.Total:e.Total}function fo(t){return this.field,"₹ "+t.map(function(e){return+e.Total}).reduce(function(e,l){return e+l},0)}let Fo=({inFindColumn:t})=>{t.formatter=Lo};const Lo=t=>{if(t===void 0)return"";var e=new Date-new Date(t),l=Math.floor(e/864e5),a=Math.floor(e%864e5/36e5),n=Math.round(e%864e5%36e5/6e4);return l+" days, "+a+" hours, "+n+" min..."};let $o=({inFindColumn:t})=>{t.footerFormatter=po};function po(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,n){return a+n},0).toFixed(0)}let Io=({inFindColumn:t})=>{t.formatter=jo},jo=(t,e,l)=>new Date(t).toLocaleDateString("en-GB"),So=({inFindColumn:t})=>{t.formatter=Vo},Vo=(t,e,l)=>(console.log("value : ",t),t===!0?'<span class="badge bg-success"><b>✓</b></span>':'<span class="badge bg-danger">✘</span>'),Co=({inColumns:t})=>{let e=t,l=e.find(r=>r.field==="KS-Serial"),a=e.find(r=>r.field==="AggValues.SettlementAmount"),n=e.find(r=>r.field==="AggValues.ItemDetails"),o=e.find(r=>r.field==="KS-AddOns"),c=e.find(r=>r.field==="Opts"),s=e.find(r=>r.field==="KS-Amount"),i=e.find(r=>r.field==="DateTime");e.find(r=>r.field==="ItemName");let d=e.find(r=>r.field==="Pcs");e.find(r=>r.field==="location");let u=e.find(r=>r.field==="DeliveryDateTime");e.find(r=>r.field==="ItemService");let m=e.find(r=>r.field==="IsSettled");l!==void 0&&_n({inFindColumn:l}),a!==void 0&&eo({inFindColumn:a}),n!==void 0&&no({inFindColumn:n}),o!==void 0&&ro({inFindColumn:o}),c!==void 0&&io({inFindColumn:c}),s!==void 0&&uo({inFindColumn:s}),i!==void 0&&Fo({inFindColumn:i}),d!==void 0&&$o({inFindColumn:d}),u!==void 0&&Io({inFindColumn:u}),m!==void 0&&So({inFindColumn:m})};const bo="ThisWeekTableId",go=()=>{var t=$(`#${bo}`);j.icons=Pn,j.onExpandRow=Rn,j.onClickRow=Zn,Co({inColumns:j.columns}),t.bootstrapTable(j)},ho="#toolbar",Oo="pk",Ao="true",To=[],yo="",Do="",wo=[{field:"KS-Serial",title:"#"},{field:"AddOnService",title:"AddOnService"},{field:"AddOnRate",title:"AddOnRate"}],T={toolbar:ho,idfield:Oo,showFooter:Ao,data:To,onClickRow:yo,icons:Do,columns:wo};let vo=({inFindColumn:t})=>{t.formatter=No},No=(t,e,l)=>l+1,Bo=({inFindColumn:t})=>{t.footerFormatter=ko};function ko(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,n){return a+n},0).toFixed(0)}let Ro=({inColumns:t})=>{let e=t,l=e.find(n=>n.field==="KS-Serial"),a=e.find(n=>n.field==="AddOnRate");l!==void 0&&vo({inFindColumn:l}),a!==void 0&&Bo({inFindColumn:a})},Eo=(t,e,l)=>{let a=e.AddOnArray,o=document.getElementById("TemplateForAddOns").content.cloneNode("true");const s=new XMLSerializer().serializeToString(o);let i=l.html(s).find("table");T.data=a,Ro({inColumns:T.columns}),i.bootstrapTable(T)};const xo="#toolbar",Po="pk",Mo="true",Ho=[],Ko=!0,Jo="",Uo="",Wo="",zo=[{field:"KS-Serial",title:"#"},{field:"ItemName",title:"ItemName"},{field:"Rate",title:"Rate"},{field:"Pcs",title:"Pcs"}],g={toolbar:xo,idfield:Po,showFooter:Mo,data:Ho,detailView:Ko,onClickRow:Jo,onExpandRow:Uo,icons:Wo,columns:zo};let Go=({inFindColumn:t})=>{t.formatter=Yo},Yo=(t,e,l)=>l+1,Xo=({inFindColumn:t})=>{t.footerFormatter=qo};function qo(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,n){return a+n},0).toFixed(0)}let Qo=({inFindColumn:t})=>{t.footerFormatter=Zo};function Zo(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,n){return a+n},0).toFixed(0)}let _o=({inColumns:t})=>{let e=t,l=e.find(o=>o.field==="KS-Serial"),a=e.find(o=>o.field==="Rate"),n=e.find(o=>o.field==="Pcs");l!==void 0&&Go({inFindColumn:l}),a!==void 0&&Xo({inFindColumn:a}),n!==void 0&&Qo({inFindColumn:n})},tr=(t,e,l)=>{let a=e.AggValues.ItemsArray,o=document.getElementById("TemplateForItemNames").content.cloneNode("true");const s=new XMLSerializer().serializeToString(o);let i=l.html(s).find("table");g.data=a,g.onExpandRow=Eo,_o({inColumns:g.columns}),i.bootstrapTable(g)};const er="bi-plus-circle fs-4",ar="bi-dash-circle fs-4",lr={detailOpen:er,detailClose:ar},nr="#toolbar",or="pk",rr="true",cr=[],ir=!0,sr="",dr="",ur="",mr=[{field:"pk",title:"Order#"},{field:"OrderData.Currentdateandtime",title:"Date",formatter:"LocalDate",visible:!1},{field:"DateTime",title:"Time Span",formatter:"TimeDiff",class:"d-none d-sm-table-cell"},{field:"AggValues.ItemDetails",title:"Items",footerFormatter:"ItemsFormatter",class:"d-none d-sm-table-cell"},{field:"AggValues.SettlementAmount",title:"Settlement",footerFormatter:"priceFormatter",align:"right",class:"d-none d-sm-table-cell"},{field:"IsSettled",title:"IsSettled",formatter:""},{title:"Opts.",field:"Opts",align:"center",formatter:""}],S={toolbar:nr,idfield:or,showFooter:rr,data:cr,detailView:ir,onClickRow:sr,onExpandRow:dr,icons:ur,columns:mr};let fr=async({inFromFetch:t})=>{t.KTF===!1?Swal.fire({icon:"warning",text:t.KReason}):F()};const Fr=async({inRowData:t})=>{let e=t.pk,a=`/Custom/Cleaning/Branch/Today/Orders/OnlyOrders/${localStorage.getItem("BranchName")}/${e}`,c=await(await fetch(a,{method:"delete",headers:{Accept:"application/json","Content-Type":"application/json"}})).json();return fr({inFromFetch:c}),c};let Lr=async({inRowData:t})=>{Swal.fire({title:"Are you sure to delete?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Delete",focusCancel:!0,focusButtonColor:"#0000ff"}).then(e=>{e.isConfirmed&&Fr({inRowData:t}).then(l=>{})})};const $r=(t,e,l)=>{l==="Opts"&&(t.IsSettled||Lr({inRowData:t}))};let pr=({inFindColumn:t})=>{t.formatter=Ir},Ir=(t,e,l)=>l+1,jr=({inFindColumn:t})=>{t.footerFormatter=Vr,t.formatter=Sr};const Sr=(t,e,l)=>t===""?"":`₹ ${t}`;function Vr(t){return"₹ "+t.map(function(e){return+e.AggValues.SettlementAmount}).reduce(function(e,l){return e+l},0)}let Cr=({inFindColumn:t})=>{t.footerFormatter=br};function br(t){this.field;var e=t.map(function(a){return+a.AggValues.ItemDetails.split(" / ")[1]}).reduce(function(a,n){return a+n},0),l=t.map(function(a){return+a.AggValues.ItemDetails.split(" / ")[0]}).reduce(function(a,n){return a+n},0);return`${l}/${e}`}const gr=({inFindColumn:t})=>{t.formatter=hr},hr=(t,e)=>{const l=e.AddOnArray;if(l&&l.length>0){const a=l.reduce((n,o)=>n+o.AddOnRate,0);return`<a href="#" class="btn btn-primary ">${l.length}-${a}</a>`}return"No"};let Or=({inFindColumn:t})=>{t.formatter=Ar};function Ar(t,e,l){return e.IsSettled?[`<a href="./ExitOrderItems.html?OrderNumber=${e.pk}" class="link-danger">`,'<i class="bi bi-dropbox"></i>',"</a>"].join(""):['<a href="#" class="link-danger DeleteClass">','<i class="bi bi-trash"></i>',"</a>"].join("")}let Tr=({inFindColumn:t})=>{t.formatter=yr,t.footerFormatter=Dr};function yr(t,e,l){let a=localStorage.getItem("PresentOrder"),n=JSON.parse(a),o=e.ItemSerial,c=Object.values(n.AddOnData).filter(s=>s.AddOnItemSerial===o);return c.length>0?c.map(i=>i.AddOnRate).reduce((i,d)=>i+d,0)*e.Pcs+e.Total:e.Total}function Dr(t){return this.field,"₹ "+t.map(function(e){return+e.Total}).reduce(function(e,l){return e+l},0)}let wr=({inFindColumn:t})=>{t.formatter=vr};const vr=t=>{if(t===void 0)return"";var e=new Date-new Date(t),l=Math.floor(e/864e5),a=Math.floor(e%864e5/36e5),n=Math.round(e%864e5%36e5/6e4);return l+" days, "+a+" hours, "+n+" min..."};let Nr=({inFindColumn:t})=>{t.footerFormatter=Br};function Br(t){var e=this.field;return t.map(function(a){return a[e]===void 0?0:+a[e]}).reduce(function(a,n){return a+n},0).toFixed(0)}let kr=({inFindColumn:t})=>{t.formatter=Rr},Rr=(t,e,l)=>new Date(t).toLocaleDateString("en-GB"),Er=({inFindColumn:t})=>{t.formatter=xr},xr=(t,e,l)=>(console.log("value : ",t),t===!0?'<span class="badge bg-success"><b>✓</b></span>':'<span class="badge bg-danger">✘</span>'),Pr=({inColumns:t})=>{let e=t,l=e.find(r=>r.field==="KS-Serial"),a=e.find(r=>r.field==="AggValues.SettlementAmount"),n=e.find(r=>r.field==="AggValues.ItemDetails"),o=e.find(r=>r.field==="KS-AddOns"),c=e.find(r=>r.field==="Opts"),s=e.find(r=>r.field==="KS-Amount"),i=e.find(r=>r.field==="DateTime");e.find(r=>r.field==="ItemName");let d=e.find(r=>r.field==="Pcs");e.find(r=>r.field==="location");let u=e.find(r=>r.field==="DeliveryDateTime");e.find(r=>r.field==="ItemService");let m=e.find(r=>r.field==="IsSettled");l!==void 0&&pr({inFindColumn:l}),a!==void 0&&jr({inFindColumn:a}),n!==void 0&&Cr({inFindColumn:n}),o!==void 0&&gr({inFindColumn:o}),c!==void 0&&Or({inFindColumn:c}),s!==void 0&&Tr({inFindColumn:s}),i!==void 0&&wr({inFindColumn:i}),d!==void 0&&Nr({inFindColumn:d}),u!==void 0&&kr({inFindColumn:u}),m!==void 0&&Er({inFindColumn:m})};const Mr="AllTableId",Hr=()=>{var t=$(`#${Mr}`);S.icons=lr,S.onExpandRow=tr,S.onClickRow=$r,Pr({inColumns:S.columns}),t.bootstrapTable(S)},Kr=()=>{on(),go(),Hr()},Jr=()=>{Kr(),Ka(),ge(),he(),Ur()};let Ur=()=>{if(Wr()!==""){var t=document.getElementById("CustomerNameSearchButtonId"),e=new Event("click");t.dispatchEvent(e)}},Wr=()=>{let e=document.getElementById("CustomerNameInputId");if(e!==null)return e.value.trim()};const zr=async()=>{if(Jr(),v({inSuccessFunc:y})===!1)return await!1;y()};document.addEventListener("DOMContentLoaded",function(){let t=document.getElementById("editCustomerModal"),l=document.getElementById("CustomerNameInputId");t.addEventListener("shown.bs.modal",function(){document.getElementById("CustomerName").focus()}),t.addEventListener("hidden.bs.modal",()=>{setTimeout(()=>{l.setAttribute("tabindex","-1"),l.focus()},5)})});zr().then();
