const r=()=>n("KSToken")!=="",n=e=>document.cookie.split("; ").reduce((t,a)=>a.startsWith(e+"=")?a.split("=")[1]:t,""),s=()=>{const e=document.getElementById("LoginModalId");e.addEventListener("shown.bs.modal",function(){document.getElementById("UsernameId").focus()}),new bootstrap.Modal(e,{focus:!0}).show()};let c=()=>!(d()===!1||i()===!1);const d=()=>{let e=document.getElementById("UsernameId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},i=()=>{let e=document.getElementById("PasswordId");return e.value===""?(e.classList.add("is-invalid"),e.focus(),!1):(e.value!==""&&e.classList.remove("is-invalid"),!0)},u="POST",m={Accept:"application/json","Content-Type":"application/json"},L="",l={method:u,headers:m,body:L};let I=()=>{let e={},t=document.getElementById("UsernameId").value,a=document.getElementById("PasswordId").value;return e.UserName=t,e.Password=a,e},j=()=>(l.body=JSON.stringify(I()),l),f=async()=>{let e=j();return await await fetch("/Login/bin/CreateToken/UsingJwt",e)},g=async({Status:e,inSuccessFunc:t})=>{let a=e;a.status===200&&(y(),t()),a.status===401&&V()},y=()=>{const e=document.getElementById("LoginModalId"),t=bootstrap.Modal.getInstance(e);t&&t.hide()},V=()=>{let e=document.getElementById("UsernameId"),t=document.getElementById("PasswordId");e.classList.add("is-invalid"),t.classList.add("is-invalid")},B=async({inSuccessFunc:e})=>{if(c()){let t=await f();g({Status:t,inSuccessFunc:e})}},F=({inSuccessFunc:e})=>{document.getElementById("LoginButtonId").addEventListener("click",async()=>{await B({inSuccessFunc:e})})},h=({inSuccessFunc:e})=>{F({inSuccessFunc:e})};const S=()=>{U(),N(),v()};let U=()=>{let t=document.getElementById("UserName"),a=localStorage.getItem("UserName");if(t!==null)return t.innerHTML=a},N=()=>{let t=document.getElementById("BranchLogOutId");const o=localStorage.getItem("BranchName").replace("BranOrders","");t!==null&&(t.innerHTML=o)},v=()=>{let t=document.getElementById("UserNameId"),a=localStorage.getItem("UserName");if(t!==null)return t.innerHTML=a};const E=({inSuccessFunc:e})=>{if(r()===!0)return S(),!0;s(),h({inSuccessFunc:e})};export{E as S};
